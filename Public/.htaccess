RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php [L]

<IfModule setenvif_module>
	SetEnv TZ Asia/Novosibirsk
</IfModule>

#<IfModule mime_module>
	# html
	#AddType text/html .html .htm .shtml

	# javascript
	#AddType application/javascript js jsonp
	#AddType application/x-javascript js
	#AddType application/json json

	#AddType text/css .css
	#AddType text/xml .xml
	#AddType text/x-component htc
	#AddType text/x-vcard vcf

	# audio
	#AddType audio/mp4 m4a f4a f4b
	#AddType audio/ogg oga ogg

	# video
	#AddType video/mp4 mp4 m4v f4v f4p
	#AddType video/ogg ogv
	#AddType video/webm webm
	#AddType video/x-flv flv
	#AddType application/x-shockwave-flash swf

	# Image
	#AddType image/webp webp
	#AddType image/x-icon ico
	#AddType image/svg+xml svg svgz
	#AddEncoding gzip svgz

	# fonts
	#AddType application/vnd.ms-fontobject eot
	#AddType application/x-font-ttf ttf ttc
	#AddType application/x-font-woff woff
	#AddType font/opentype otf

	#AddType application/x-chrome-extension crx
	#AddType application/x-opera-extension oex
	#AddType application/x-web-app-manifest+json webapp
	#AddType application/x-xpinstall xpi
	#AddType application/xml rss atom xml rdf
	#AddType text/cache-manifest appcache manifest
	#AddType text/vtt vtt

	# handlers
	#AddHandler application/x-httpd-php .php .php5 .php4
	#AddHandler cgi-script .pl .py .jsp .asp .htm .shtml .sh .cgi
	#AddOutputFilter INCLUDES .shtml
#</IfModule>

# Сжатие ответа
<IfModule deflate_module>
	AddOutputFilterByType DEFLATE application/atom+xml application/javascript application/json application/rss+xml application/vnd.ms-fontobject application/x-font-ttf application/xhtml+xml application/xml font/opentype image/svg+xml image/x-icon text/css text/html text/plain text/x-component text/xml
</IfModule>

<IfModule gzip_module>
	mod_gzip_on Yes
	mod_gzip_dechunk Yes

	mod_gzip_item_include file \.(html?|txt|css|js|rss|xml|json)$
	mod_gzip_item_include mime ^text\.*
	mod_gzip_item_include mime ^application/javascript.*
	mod_gzip_item_include mime ^application/x-javascript.*
	mod_gzip_item_include mime ^application/x-font-woff.*
	mod_gzip_item_exclude mime ^image\.*
	mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</IfModule>

# отключение ETag
FileETag None

# Установка заголовков ответа (Cache-Control и т.д.)
<IfModule headers_module>
	Header set X-UA-Compatible "IE=Edge,chrome=1"
	Header set Access-Control-Allow-Origin "*"
	Header unset ETag

	<FilesMatch "\.(html|htm|shtml|json|xml)$">
		Header set Cache-Control "max-age=0"
		Header unset X-UA-Compatible
	</FilesMatch>

	# images
	<FilesMatch "\.(jpe?g|gif|png|ico|tiff|bmp|svgz?|pdf)$">
		Header set Cache-Control "max-age=2592000"
		Header unset X-UA-Compatible
	</FilesMatch>

	# audio
	<FilesMatch "\.(m4a|f4a|f4b|oga|ogg|mp3)$">
		Header set Cache-Control "max-age=2592000"
		Header unset X-UA-Compatible
	</FilesMatch>

	# video
	<FilesMatch "\.(mp4|m4v|f4v|f4b|ogv|webm|flv|swf)$">
		Header set Cache-Control "max-age=2592000"
		Header unset X-UA-Compatible
	</FilesMatch>

	# fonts
	<FilesMatch "\.(eot|ttf|ttc|woff|otf)$">
		Header set Cache-Control "max-age=2592000"
		Header unset X-UA-Compatible
	</FilesMatch>

	# resources
	<FilesMatch "\.(js|css|htc)$">
    	Header set Cache-Control "max-age=604800"
    	Header unset X-UA-Compatible
    </FilesMatch>

	# rss
	<FilesMatch "\.(rss|atom)$">
		Header set Cache-Control "max-age=3600"
		Header unset X-UA-Compatible
	</FilesMatch>

	<FilesMatch "\.(appcache|crx|manifest|safariextz|vcf|xpi)$">
		Header unset X-UA-Compatible
		Header unset X-UA-Compatible
	</FilesMatch>
</IfModule>

# Установка кэша
<IfModule expires_module>
	ExpiresActive                               On
	ExpiresDefault                              "access plus 0 seconds"

	# images
	ExpiresByType image/x-icon                  "access plus 1 month"
	ExpiresByType image/gif                     "access plus 1 month"
	ExpiresByType image/png                     "access plus 1 month"
	ExpiresByType image/jpg                     "access plus 1 month"
	ExpiresByType image/jpeg                    "access plus 1 month"
	ExpiresByType image/svg+xml                 "access plus 1 month"
	ExpiresByType image/tiff                    "access plus 1 month"

	# audio
	ExpiresByType audio/ogg                     "access plus 1 month"
	ExpiresByType audio/mp4                     "access plus 1 month"

	# video
	ExpiresByType video/mp4                     "access plus 1 month"
	ExpiresByType video/ogg                     "access plus 1 month"
	ExpiresByType video/webm                    "access plus 1 month"
	ExpiresByType video/x-flv                   "access plus 1 month"
	ExpiresByType application/x-shockwave-flash "access plus 1 month"

	# fonts
	ExpiresByType application/x-font-ttf        "access plus 1 month"
	ExpiresByType application/x-font-woff       "access plus 1 month"
	ExpiresByType font/opentype                 "access plus 1 month"
	ExpiresByType application/vnd.ms-fontobject "access plus 1 month"

	# resources
	ExpiresByType text/css                      "access plus 1 week"
	ExpiresByType text/x-component              "access plus 1 week"
	ExpiresByType application/javascript        "access plus 1 week"
	ExpiresByType application/x-javascript      "access plus 1 week"

	# rss
	ExpiresByType application/atom+xml          "access plus 1 hour"
	ExpiresByType application/rss+xml           "access plus 1 hour"
</IfModule>

# Отключаем вывод данных о сервере на страницах ошибки
ServerSignature Off

# Ошибки сервера
ErrorDocument 403 /error/403
ErrorDocument 404 /error/404
ErrorDocument 500 /error/500

ErrorDocument 400 /error/400
ErrorDocument 401 /error/401
ErrorDocument 405 /error/405
ErrorDocument 408 /error/408
ErrorDocument 414 /error/414
ErrorDocument 501 /error/501
ErrorDocument 502 /error/502
ErrorDocument 503 /error/503
ErrorDocument 504 /error/504